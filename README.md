full implementation of a shell programme
